# Generated by ariadne-codegen
# Source: queries

from typing import Any, Optional, Union

from .base_client import DeezerBaseClient
from .base_model import UNSET, UnsetType
from .get_album import GetAlbum, GetAlbumAlbum
from .get_artist import GetArtist, GetArtistArtist
from .get_me import GetMe, GetMeMe
from .get_playlist import GetPlaylist, GetPlaylistPlaylist
from .get_track import GetTrack, GetTrackTrack
from .search import Search, SearchSearch


def gql(q: str) -> str:
    return q


class DeezerGQLClient(DeezerBaseClient):
    async def get_album(self, album_id: str, **kwargs: Any) -> Optional[GetAlbumAlbum]:
        query = gql("""
            query GetAlbum($albumId: String!) {
              album(albumId: $albumId) {
                id
                displayTitle
                type
                cover {
                  id
                  urls(pictureRequest: {width: 1000, height: 1000})
                }
                label
                contributors(first: 50, roles: [MAIN, FEATURED]) {
                  edges {
                    roles
                    node {
                      __typename
                      ... on Artist {
                        id
                        name
                      }
                    }
                  }
                }
                releaseDate
                duration
                tracksCount
                discsCount
                isExplicit
                isTakenDown
                isFavorite
                fallback {
                  id
                  displayTitle
                }
                tracks(first: 50) {
                  edges {
                    cursor
                    node {
                      id
                      title
                      ISRC
                      diskInfo {
                        diskNumber
                        trackNumber
                      }
                      duration
                      isExplicit
                      contributors(first: 10, roles: [MAIN, FEATURED]) {
                        edges {
                          roles
                          node {
                            __typename
                            ... on Artist {
                              id
                              name
                            }
                          }
                        }
                      }
                    }
                  }
                  pageInfo {
                    hasNextPage
                    endCursor
                  }
                }
                url {
                  __typename
                  ... on Url {
                    webUrl
                  }
                }
              }
            }
            """)
        variables: dict[str, object] = {"albumId": album_id}
        response = await self.execute(
            query=query, operation_name="GetAlbum", variables=variables, **kwargs
        )
        data = self.get_data(response)
        return GetAlbum.model_validate(data).album

    async def get_artist(
        self, artist_id: str, **kwargs: Any
    ) -> Optional[GetArtistArtist]:
        query = gql("""
            query GetArtist($artistId: String!) {
              artist(artistId: $artistId) {
                id
                name
                picture {
                  id
                  urls(pictureRequest: {width: 1000, height: 1000})
                }
                bio {
                  summary
                  full
                }
                fansCount
                isFavorite
                url {
                  __typename
                  ... on Url {
                    webUrl
                  }
                }
                topTracks(first: 50) {
                  edges {
                    cursor
                    node {
                      id
                      title
                      ISRC
                      duration
                      isExplicit
                      album {
                        id
                        displayTitle
                        cover {
                          id
                          urls(pictureRequest: {width: 264, height: 264})
                        }
                      }
                      contributors(first: 10, roles: [MAIN, FEATURED]) {
                        edges {
                          roles
                          node {
                            __typename
                            ... on Artist {
                              id
                              name
                            }
                          }
                        }
                      }
                    }
                  }
                  pageInfo {
                    hasNextPage
                    endCursor
                  }
                }
                albums(types: [ALBUM, SINGLES, EP], order: RELEASE_DATE, first: 25) {
                  edges {
                    cursor
                    node {
                      id
                      displayTitle
                      type
                      cover {
                        id
                        urls(pictureRequest: {width: 264, height: 264})
                      }
                      releaseDate
                      tracksCount
                      isExplicit
                    }
                  }
                  pageInfo {
                    hasNextPage
                    endCursor
                  }
                }
              }
            }
            """)
        variables: dict[str, object] = {"artistId": artist_id}
        response = await self.execute(
            query=query, operation_name="GetArtist", variables=variables, **kwargs
        )
        data = self.get_data(response)
        return GetArtist.model_validate(data).artist

    async def get_me(self, **kwargs: Any) -> Optional[GetMeMe]:
        query = gql("""
            query GetMe {
              me {
                id
              }
            }
            """)
        variables: dict[str, object] = {}
        response = await self.execute(
            query=query, operation_name="GetMe", variables=variables, **kwargs
        )
        data = self.get_data(response)
        return GetMe.model_validate(data).me

    async def get_playlist(
        self, playlist_id: str, **kwargs: Any
    ) -> Optional[GetPlaylistPlaylist]:
        query = gql("""
            query GetPlaylist($playlistId: String!) {
              playlist(playlistId: $playlistId) {
                id
                title
                description
                isPrivate
                isCollaborative
                estimatedTracksCount
                estimatedDuration
                isFavorite
                picture {
                  id
                  urls(pictureRequest: {width: 1000, height: 1000})
                }
                owner {
                  id
                  name
                }
                tracks(first: 50) {
                  edges {
                    cursor
                    node {
                      id
                      title
                      ISRC
                      diskInfo {
                        diskNumber
                        trackNumber
                      }
                      duration
                      isExplicit
                      album {
                        id
                        displayTitle
                        cover {
                          id
                          urls(pictureRequest: {width: 264, height: 264})
                        }
                      }
                      contributors(first: 10, roles: [MAIN, FEATURED]) {
                        edges {
                          roles
                          node {
                            __typename
                            ... on Artist {
                              id
                              name
                            }
                          }
                        }
                      }
                    }
                  }
                  pageInfo {
                    hasNextPage
                    endCursor
                  }
                }
              }
            }
            """)
        variables: dict[str, object] = {"playlistId": playlist_id}
        response = await self.execute(
            query=query, operation_name="GetPlaylist", variables=variables, **kwargs
        )
        data = self.get_data(response)
        return GetPlaylist.model_validate(data).playlist

    async def get_track(self, track_id: str, **kwargs: Any) -> Optional[GetTrackTrack]:
        query = gql("""
            query GetTrack($trackId: String!) {
              track(trackId: $trackId) {
                id
                title
                ISRC
                diskInfo {
                  diskNumber
                  trackNumber
                }
                duration
                isExplicit
                isAtmos
                releaseDate
                album {
                  id
                  displayTitle
                  cover {
                    id
                    urls(pictureRequest: {width: 1000, height: 1000})
                  }
                }
                contributors(first: 50, roles: [MAIN, FEATURED]) {
                  edges {
                    roles
                    node {
                      __typename
                      ... on Artist {
                        id
                        name
                      }
                    }
                  }
                }
                media {
                  id
                  version
                  token {
                    payload
                    expiresAt
                  }
                  estimatedSizes {
                    MP3_MISC
                    MP3_128
                    MP3_320
                    FLAC
                  }
                  rights {
                    ads {
                      available
                    }
                    sub {
                      available
                    }
                  }
                }
                lyrics {
                  synchronizedLines {
                    lrcTimestamp
                    line
                    milliseconds
                    duration
                  }
                  text
                  copyright
                  writers
                }
                isFavorite
              }
            }
            """)
        variables: dict[str, object] = {"trackId": track_id}
        response = await self.execute(
            query=query, operation_name="GetTrack", variables=variables, **kwargs
        )
        data = self.get_data(response)
        return GetTrack.model_validate(data).track

    async def search(
        self,
        query: str,
        tracks_first: Union[Optional[int], UnsetType] = UNSET,
        albums_first: Union[Optional[int], UnsetType] = UNSET,
        artists_first: Union[Optional[int], UnsetType] = UNSET,
        playlists_first: Union[Optional[int], UnsetType] = UNSET,
        **kwargs: Any
    ) -> Optional[SearchSearch]:
        _query = gql("""
            query Search($query: String!, $tracksFirst: Int = 20, $albumsFirst: Int = 20, $artistsFirst: Int = 20, $playlistsFirst: Int = 10) {
              search(query: $query) {
                results {
                  tracks(first: $tracksFirst) {
                    edges {
                      cursor
                      node {
                        id
                        title
                        ISRC
                        duration
                        isExplicit
                        album {
                          id
                          displayTitle
                          cover {
                            id
                            urls(pictureRequest: {width: 264, height: 264})
                          }
                        }
                        contributors(first: 10, roles: [MAIN, FEATURED]) {
                          edges {
                            roles
                            node {
                              __typename
                              ... on Artist {
                                id
                                name
                              }
                            }
                          }
                        }
                      }
                    }
                    pageInfo {
                      hasNextPage
                      endCursor
                    }
                  }
                  albums(first: $albumsFirst) {
                    edges {
                      cursor
                      node {
                        id
                        displayTitle
                        type
                        cover {
                          id
                          urls(pictureRequest: {width: 264, height: 264})
                        }
                        contributors(first: 5, roles: [MAIN]) {
                          edges {
                            node {
                              __typename
                              ... on Artist {
                                id
                                name
                              }
                            }
                          }
                        }
                        releaseDate
                        isExplicit
                      }
                    }
                    pageInfo {
                      hasNextPage
                      endCursor
                    }
                  }
                  artists(first: $artistsFirst) {
                    edges {
                      cursor
                      node {
                        id
                        name
                        picture {
                          id
                          urls(pictureRequest: {width: 264, height: 264})
                        }
                        fansCount
                      }
                    }
                    pageInfo {
                      hasNextPage
                      endCursor
                    }
                  }
                  playlists(first: $playlistsFirst) {
                    edges {
                      cursor
                      node {
                        id
                        title
                        picture {
                          id
                          urls(pictureRequest: {width: 264, height: 264})
                        }
                        estimatedTracksCount
                        owner {
                          id
                          name
                        }
                      }
                    }
                    pageInfo {
                      hasNextPage
                      endCursor
                    }
                  }
                }
              }
            }
            """)
        variables: dict[str, object] = {
            "query": query,
            "tracksFirst": tracks_first,
            "albumsFirst": albums_first,
            "artistsFirst": artists_first,
            "playlistsFirst": playlists_first,
        }
        response = await self.execute(
            query=_query, operation_name="Search", variables=variables, **kwargs
        )
        data = self.get_data(response)
        return Search.model_validate(data).search
